name: Daily Commit

on:
  schedule:
    # 매일 랜덤한 시간에 실행 (UTC 기준 0-23시 중 랜덤)
    - cron: '0 0 * * *'  # 매일 UTC 0시 (한국시간 오전 9시)
    - cron: '30 6 * * *' # 매일 UTC 6시 30분 (한국시간 오후 3시 30분)
    - cron: '15 12 * * *' # 매일 UTC 12시 15분 (한국시간 오후 9시 15분)
  workflow_dispatch: # 수동으로도 실행 가능

jobs:
  daily-commit:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Setup Git
        run: |
          git config --local user.email "neolove0125@gmail.com"
          git config --local user.name "Energy System Bot"

      - name: Create daily commit
        run: |
          # 현재 날짜와 시간
          echo "Daily commit: $(date '+%Y-%m-%d %H:%M:%S KST')" >> daily_activity.log
          
          # 랜덤한 활동 메시지 생성
          activities=(
            "에너지 관리 시스템 코드 리뷰"
            "머신러닝 모델 성능 개선"
            "IoT 센서 데이터 처리 최적화"
            "웹 대시보드 UI/UX 개선"
            "데이터 전처리 파이프라인 업데이트"
            "API 엔드포인트 성능 튜닝"
            "실시간 모니터링 기능 강화"
            "에너지 예측 알고리즘 개선"
            "데이터베이스 쿼리 최적화"
            "보안 취약점 점검 및 수정"
            "테스트 커버리지 향상"
            "문서화 및 주석 개선"
            "로깅 시스템 강화"
            "에러 핸들링 개선"
            "코드 리팩토링"
            "성능 모니터링 추가"
            "사용자 피드백 반영"
            "배포 자동화 개선"
            "데이터 시각화 업데이트"
            "알고리즘 정확도 향상"
          )
          
          # 랜덤하게 활동 선택
          random_activity=${activities[$RANDOM % ${#activities[@]}]}
          
          # 커밋 메시지 생성
          commit_message="🌱 Daily activity: $random_activity - $(date '+%Y-%m-%d')"
          
          echo "$commit_message" >> daily_activity.log
          
          # 파일 추가 및 커밋
          git add daily_activity.log
          git commit -m "$commit_message"
          
          # 푸시
          git push

      - name: Show commit info
        run: |
          echo "✅ Daily commit completed!"
          echo "📅 Date: $(date)"
          echo "🌱 Activity log updated"
