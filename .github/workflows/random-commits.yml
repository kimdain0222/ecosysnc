name: Random Commits

on:
  schedule:
    # 주중에 랜덤한 시간에 추가 커밋 (월-금)
    - cron: '45 2 * * 1-5'  # 월-금 UTC 2시 45분 (한국시간 오전 11시 45분)
    - cron: '20 8 * * 1-5'  # 월-금 UTC 8시 20분 (한국시간 오후 5시 20분)
    - cron: '10 14 * * 1-5' # 월-금 UTC 14시 10분 (한국시간 오후 11시 10분)
  workflow_dispatch: # 수동으로도 실행 가능

jobs:
  random-commits:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Setup Git
        run: |
          git config --local user.email "neolove0125@gmail.com"
          git config --local user.name "Energy System Bot"

      - name: Create random commit
        run: |
          # 랜덤한 파일 수정 (실제로는 로그만 업데이트)
          echo "Random activity: $(date '+%Y-%m-%d %H:%M:%S KST')" >> daily_activity.log
          
          # 랜덤한 활동 메시지 생성
          activities=(
            "데이터 분석 스크립트 개선"
            "모델 하이퍼파라미터 튜닝"
            "센서 데이터 검증 로직 추가"
            "대시보드 차트 업데이트"
            "API 응답 시간 최적화"
            "데이터베이스 인덱스 추가"
            "캐싱 메커니즘 구현"
            "실시간 알림 기능 개발"
            "사용자 인증 시스템 강화"
            "데이터 백업 자동화"
            "모니터링 대시보드 개선"
            "에러 로그 분석 도구 추가"
            "성능 벤치마크 테스트"
            "코드 품질 메트릭 수집"
            "자동화 스크립트 개선"
            "문서 자동 생성 기능"
            "테스트 데이터 생성기 업데이트"
            "배치 작업 스케줄러 개선"
            "리소스 사용량 모니터링"
            "보안 정책 업데이트"
          )
          
          # 랜덤하게 활동 선택
          random_activity=${activities[$RANDOM % ${#activities[@]}]}
          
          # 커밋 메시지 생성
          commit_message="🔧 $random_activity - $(date '+%Y-%m-%d %H:%M')"
          
          echo "$commit_message" >> daily_activity.log
          
          # 파일 추가 및 커밋
          git add daily_activity.log
          git commit -m "$commit_message"
          
          # 푸시
          git push

      - name: Show commit info
        run: |
          echo "✅ Random commit completed!"
          echo "📅 Date: $(date)"
          echo "🔧 Activity: $random_activity"
